<!-- 文件搜索页面 -->
<div class="mb-6">
    <!-- 搜索表单 -->
    <div class="bg-white rounded-lg shadow p-6 mb-6">
        <form class="space-y-4">
            <!-- 搜索框 -->
            <div>
                <div class="flex">
                    <div class="relative flex-1">
                        <input type="text" id="search-input" placeholder="输入搜索关键词..." class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                    </div>
                    <button type="submit" class="bg-primary-600 text-white px-6 py-3 rounded-r-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2">
                        搜索
                    </button>
                </div>
            </div>
            
            <!-- 高级选项 -->
            <div x-data="{ open: false }" class="mt-2">
                <button type="button" @click="open = !open" class="flex items-center text-sm text-gray-600 hover:text-primary-600 focus:outline-none">
                    <span>高级搜索选项</span>
                    <i class="fas" :class="open ? 'fa-chevron-up' : 'fa-chevron-down'" class="ml-1"></i>
                </button>
                
                <div x-show="open" class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- 文件类型过滤 -->
                    <div>
                        <label for="file-type" class="block text-sm font-medium text-gray-700 mb-1">文件类型</label>
                        <select id="file-type" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            <option value="all">全部类型</option>
                            <option value="pdf">PDF</option>
                            <option value="doc">Word</option>
                            <option value="xls">Excel</option>
                            <option value="ppt">PowerPoint</option>
                            <option value="txt">文本文件</option>
                            <option value="code">代码文件</option>
                        </select>
                    </div>
                    
                    <!-- 知识库选择 -->
                    <div>
                        <label for="knowledge-base" class="block text-sm font-medium text-gray-700 mb-1">知识库</label>
                        <select id="knowledge-base" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            <option value="all">全部知识库</option>
                            <option value="product">产品技术文档库</option>
                            <option value="training">企业培训资料库</option>
                            <option value="marketing">市场营销资料库</option>
                            <option value="support">客户支持知识库</option>
                            <option value="dev">研发项目文档</option>
                        </select>
                    </div>
                    
                    <!-- 时间范围 -->
                    <div>
                        <label for="time-range" class="block text-sm font-medium text-gray-700 mb-1">时间范围</label>
                        <select id="time-range" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            <option value="all">不限</option>
                            <option value="day">过去24小时</option>
                            <option value="week">过去一周</option>
                            <option value="month">过去一个月</option>
                            <option value="year">过去一年</option>
                            <option value="custom">自定义范围</option>
                        </select>
                    </div>
                    
                    <!-- 搜索模式 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">搜索模式</label>
                        <div class="space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="search-mode" value="semantic" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300" checked>
                                <span class="ml-2 text-sm text-gray-700">语义搜索</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="search-mode" value="keyword" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300">
                                <span class="ml-2 text-sm text-gray-700">关键词匹配</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 精确匹配 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">精确匹配选项</label>
                        <div class="space-x-4">
                            <label class="inline-flex items-center">
                                <input type="checkbox" name="exact-match" value="1" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded">
                                <span class="ml-2 text-sm text-gray-700">精确匹配</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" name="case-sensitive" value="1" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded">
                                <span class="ml-2 text-sm text-gray-700">区分大小写</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 搜索结果数量 -->
                    <div>
                        <label for="result-count" class="block text-sm font-medium text-gray-700 mb-1">结果数量</label>
                        <select id="result-count" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            <option value="10">10条</option>
                            <option value="20" selected>20条</option>
                            <option value="50">50条</option>
                            <option value="100">100条</option>
                        </select>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- 搜索结果 -->
    <div class="bg-white rounded-lg shadow overflow-hidden">
        <div class="border-b border-gray-200 p-6">
            <div class="flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-900">搜索结果</h3>
                <div class="text-sm text-gray-500">
                    找到 <span class="font-semibold">68</span> 条相关结果，用时 <span class="font-semibold">0.18</span> 秒
                </div>
            </div>
        </div>
        
        <div class="divide-y divide-gray-200">
            <!-- 搜索结果项1 -->
            <div class="p-6 hover:bg-gray-50">
                <div class="flex items-start">
                    <div class="flex-shrink-0 mt-1">
                        <i class="fas fa-file-pdf text-red-500 text-xl"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <h4 class="text-lg font-medium text-primary-600 hover:text-primary-800">
                            <a href="#">微服务架构设计指南.pdf</a>
                        </h4>
                        <div class="mt-1 flex items-center text-sm text-gray-500">
                            <span class="truncate">产品技术文档库</span>
                            <span class="mx-1">·</span>
                            <span>3.2 MB</span>
                            <span class="mx-1">·</span>
                            <span>2023-06-15</span>
                            <span class="mx-1">·</span>
                            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">相关度 94%</span>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">
                            微服务架构是一种将应用程序设计为一系列松散耦合的独立服务的软件架构风格。每个服务负责特定的业务功能，并通过API与其他服务通信。这种架构提高了<mark class="bg-yellow-200">系统弹性</mark>和可维护性，允许团队独立部署和扩展各个组件...
                        </p>
                        <div class="mt-2 flex space-x-4">
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-eye mr-1"></i>
                                <span>查看文件</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-comment-alt mr-1"></i>
                                <span>开始对话</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-download mr-1"></i>
                                <span>下载</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 搜索结果项2 -->
            <div class="p-6 hover:bg-gray-50">
                <div class="flex items-start">
                    <div class="flex-shrink-0 mt-1">
                        <i class="fas fa-file-word text-blue-500 text-xl"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <h4 class="text-lg font-medium text-primary-600 hover:text-primary-800">
                            <a href="#">高可用架构最佳实践.docx</a>
                        </h4>
                        <div class="mt-1 flex items-center text-sm text-gray-500">
                            <span class="truncate">研发项目文档</span>
                            <span class="mx-1">·</span>
                            <span>1.8 MB</span>
                            <span class="mx-1">·</span>
                            <span>2023-05-22</span>
                            <span class="mx-1">·</span>
                            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">相关度 91%</span>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">
                            高可用性是指系统在长时间内保持稳定运行的能力。通过冗余设计、负载均衡、服务降级等策略，可以显著提高<mark class="bg-yellow-200">系统弹性</mark>，确保关键业务在面对各种故障时仍能持续运行。本文介绍了提高系统可用性的关键技术和策略...
                        </p>
                        <div class="mt-2 flex space-x-4">
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-eye mr-1"></i>
                                <span>查看文件</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-comment-alt mr-1"></i>
                                <span>开始对话</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-download mr-1"></i>
                                <span>下载</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 搜索结果项3 -->
            <div class="p-6 hover:bg-gray-50">
                <div class="flex items-start">
                    <div class="flex-shrink-0 mt-1">
                        <i class="fas fa-file-powerpoint text-orange-500 text-xl"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <h4 class="text-lg font-medium text-primary-600 hover:text-primary-800">
                            <a href="#">云原生应用技术栈.pptx</a>
                        </h4>
                        <div class="mt-1 flex items-center text-sm text-gray-500">
                            <span class="truncate">企业培训资料库</span>
                            <span class="mx-1">·</span>
                            <span>5.4 MB</span>
                            <span class="mx-1">·</span>
                            <span>2023-04-18</span>
                            <span class="mx-1">·</span>
                            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">相关度 87%</span>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">
                            云原生应用是专门为云环境设计和构建的应用程序。它们遵循微服务架构、容器化部署和自动化运维等原则，利用云平台提供的<mark class="bg-yellow-200">弹性</mark>、可扩展性和高可用性等特性。本演示文稿介绍了Kubernetes、服务网格、无服务器计算等关键技术...
                        </p>
                        <div class="mt-2 flex space-x-4">
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-eye mr-1"></i>
                                <span>查看文件</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-comment-alt mr-1"></i>
                                <span>开始对话</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-download mr-1"></i>
                                <span>下载</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 搜索结果项4 -->
            <div class="p-6 hover:bg-gray-50">
                <div class="flex items-start">
                    <div class="flex-shrink-0 mt-1">
                        <i class="fas fa-file-code text-purple-500 text-xl"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <h4 class="text-lg font-medium text-primary-600 hover:text-primary-800">
                            <a href="#">弹性伸缩策略设计.md</a>
                        </h4>
                        <div class="mt-1 flex items-center text-sm text-gray-500">
                            <span class="truncate">研发项目文档</span>
                            <span class="mx-1">·</span>
                            <span>420 KB</span>
                            <span class="mx-1">·</span>
                            <span>2023-07-05</span>
                            <span class="mx-1">·</span>
                            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">相关度 85%</span>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">
                            <mark class="bg-yellow-200">弹性</mark>伸缩是云计算环境中根据负载自动调整资源的能力。本文档介绍了水平伸缩和垂直伸缩策略，以及基于CPU利用率、内存使用率和请求率等指标的伸缩规则设计。同时讨论了伸缩阈值设置、冷却期配置和预测性伸缩等高级主题...
                        </p>
                        <div class="mt-2 flex space-x-4">
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-eye mr-1"></i>
                                <span>查看文件</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-comment-alt mr-1"></i>
                                <span>开始对话</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-download mr-1"></i>
                                <span>下载</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 搜索结果项5 -->
            <div class="p-6 hover:bg-gray-50">
                <div class="flex items-start">
                    <div class="flex-shrink-0 mt-1">
                        <i class="fas fa-file-alt text-gray-500 text-xl"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <h4 class="text-lg font-medium text-primary-600 hover:text-primary-800">
                            <a href="#">混沌工程实践指南.txt</a>
                        </h4>
                        <div class="mt-1 flex items-center text-sm text-gray-500">
                            <span class="truncate">产品技术文档库</span>
                            <span class="mx-1">·</span>
                            <span>210 KB</span>
                            <span class="mx-1">·</span>
                            <span>2023-03-10</span>
                            <span class="mx-1">·</span>
                            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">相关度 82%</span>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">
                            混沌工程是通过在生产环境中进行受控实验，主动注入故障来测试<mark class="bg-yellow-200">系统弹性</mark>的实践。本指南介绍了混沌工程的基本原则、实施步骤和常用工具，包括Chaos Monkey、Gremlin等。通过计划和执行混沌实验，可以发现系统中潜在的弱点...
                        </p>
                        <div class="mt-2 flex space-x-4">
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-eye mr-1"></i>
                                <span>查看文件</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-comment-alt mr-1"></i>
                                <span>开始对话</span>
                            </button>
                            <button class="text-sm text-gray-600 hover:text-primary-600 flex items-center">
                                <i class="fas fa-download mr-1"></i>
                                <span>下载</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 分页 -->
        <div class="px-6 py-4 flex items-center justify-between border-t border-gray-200">
            <div class="text-sm text-gray-700">
                显示 <span class="font-medium">1</span> 到 <span class="font-medium">5</span> 共 <span class="font-medium">68</span> 条结果
            </div>
            <div class="flex space-x-1">
                <button class="px-3 py-1 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 disabled:opacity-50" disabled>
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="px-3 py-1 rounded-lg border border-primary-600 bg-primary-600 text-white">
                    1
                </button>
                <button class="px-3 py-1 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50">
                    2
                </button>
                <button class="px-3 py-1 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50">
                    3
                </button>
                <button class="px-3 py-1 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50">
                    ...
                </button>
                <button class="px-3 py-1 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50">
                    14
                </button>
                <button class="px-3 py-1 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/alpinejs@2"></script>
<script>
    document.addEventListener('pageLoaded', function(e) {
        if (e.detail.page === 'files') {
            console.log('文件搜索页面已加载');
            
            // 初始化搜索功能
            const searchForm = document.querySelector('form');
            const searchInput = document.getElementById('search-input');
            
            if (searchForm && searchInput) {
                // 预设搜索关键词
                searchInput.value = '系统弹性';
                
                // 处理搜索表单提交
                searchForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const query = searchInput.value.trim();
                    
                    if (query) {
                        alert(`执行搜索: ${query}`);
                        // 在实际应用中，这里会调用API执行搜索并更新结果
                    }
                });
            }
            
            // 搜索结果项操作按钮
            const resultButtons = document.querySelectorAll('.hover\\:bg-gray-50 button');
            if (resultButtons) {
                resultButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const action = button.querySelector('span').textContent;
                        const resultItem = button.closest('.hover\\:bg-gray-50');
                        const fileName = resultItem.querySelector('h4 a').textContent;
                        
                        if (action === '查看文件') {
                            alert(`查看文件: ${fileName}`);
                        } else if (action === '开始对话') {
                            alert(`开始关于 ${fileName} 的对话`);
                            // 在实际应用中，这里会跳转到聊天页面并传递文件信息
                            window.location.href = '?page=chat';
                        } else if (action === '下载') {
                            alert(`下载文件: ${fileName}`);
                        }
                    });
                });
            }
        }
    });
</script> 