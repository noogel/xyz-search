<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload Files</title>
    <meta id="csrf-token" name="csrf-token" th:content="${_csrf.token}" th:if="${_csrf}">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <link href="css/dropzone.min.css" rel="stylesheet"/>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/dropzone.min.js"></script>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="row text-center">
                <p class="popout">
                    <span>畅</span>
                    <span>文</span>
                    <span>全</span>
                    <span>索</span>
                </p>
            </div>
        </div>
        <div class="col-md-10 offset-md-1">
            <form class="dropzone dz-clickable border rounded bg-light p-3">
                <div class="dz-default dz-message text-center">
                    <i class="bi bi-cloud-arrow-up" style="font-size: 2rem;"></i>
                    <div class="mt-3">拖放文件或者点击上传</div>
                </div>
            </form>
        </div>
        <div class="col-12">
            <footer class="py-3 my-4">
                <ul class="nav justify-content-center border-bottom pb-3 mb-3">
                    <li class="nav-item"><a class="nav-link px-2 text-muted" href="/">搜索</a></li>
                    <li class="nav-item"><a href="/chat/page" class="nav-link px-2 text-muted">AI 对话</a></li>
                    <li class="nav-item"><a class="nav-link px-2 text-muted" href="/upload">上传</a></li>
                    <li class="nav-item"><a class="nav-link px-2 text-muted" href="/settings">设置</a></li>
                    <li class="nav-item"><a class="nav-link px-2 text-muted" href="/logout">登出</a></li>
                </ul>
                <p class="text-center text-muted">© 2015 – 2025 <span style="font-size: 0.8rem">❤</span> noogel</p>
            </footer>
        </div>
    </div>
</div>
<script>
    Dropzone.autoDiscover = false;
    new Dropzone(".dropzone", {
        url: "/upload",
        paramName: "file",
        maxFilesize: 1024, // MB
        maxFiles: 500,
        parallelUploads: 1,
        dictDefaultMessage: "拖放文件或者点击上传",
        clickable: true,
        acceptedFiles: 'application/pdf,text/*,application/epub+zip,video/*,image/*',
        headers: {
            'x-csrf-token': document.head.querySelector('meta[name="csrf-token"]').content
        }
    });
</script>
</body>
</html>